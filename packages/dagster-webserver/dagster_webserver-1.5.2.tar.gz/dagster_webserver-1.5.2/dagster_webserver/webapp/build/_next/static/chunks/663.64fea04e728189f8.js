"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[663],{28888:function(e,n,r){r.d(n,{T:function(){return i}});var t=r(73235);function o(){var e=(0,t._)(["\n  height: 100%;\n  overflow-y: auto;\n  padding-bottom: 64px;\n  width: 100%;\n"]);return o=function(){return e},e}var i=r(35505).ZP.div.withConfig({componentId:"sc-2cf5acf-0"})(o())},17131:function(e,n,r){r.d(n,{m:function(){return c}});var t=r(73235),o=r(52322);r(2784);var i=r(35505),s=r(18399),a=r(86412);function u(){var e=(0,t._)(["\n  width: 100%;\n\n  /**\n   * Blueprint breadcrumbs annoyingly have a built-in height.\n   */\n  .bp4-breadcrumbs {\n    height: auto;\n  }\n"]);return u=function(){return e},e}var c=function(e){var n=e.title,r=e.tags,t=e.right,i=e.tabs;return(0,o.jsxs)(l,{background:a.w.Gray50,padding:{top:16,left:24,right:12},border:"bottom",children:[(0,o.jsxs)(s.x,{flex:{direction:"row",justifyContent:"space-between"},padding:{bottom:16},children:[(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"flex-start",gap:12,wrap:"wrap"},children:[n,r]}),t]}),i]})},l=(0,i.ZP)(s.x).withConfig({componentId:"sc-a1bb63a9-0"})(u())},18774:function(e,n,r){r.d(n,{$H:function(){return v},Lg:function(){return y},eB:function(){return h}});var t=r(52322),o=r(58931),i=r(71897),s=r(44678),a=r(18399),u=r(82585),c=r(18149),l=r.n(c),p=r(84636),d=r.n(p),f=r(2784),m=r(68912),g=r(37160);function h(e){return f.useMemo(function(){return d()((e||[]).map(v).filter(function(e){return!!e}),function(e){return JSON.stringify(e)}).sort(function(e,n){return e.groupName.localeCompare(n.groupName)})},[e])}var x={groupName:"-",repositoryLocationName:"-",repositoryName:"-"},y=function(e){var n=e.assetGroups,r=e.value,c=e.onChange,p=function(e){return"".concat(e.repositoryName,"@").concat(e.repositoryLocationName)},d=n[0]?p(n[0]):"",f=!n.every(function(e){return d===p(e)});return(0,t.jsx)(o.U5,{selectedItem:r.length?x:null,items:n,menuWidth:300,inputProps:{style:{width:200},placeholder:"Filter asset groupsâ€¦",rightElement:r.length?(0,t.jsx)(m.C,{onClick:function(){return c([])},style:{marginTop:5,marginRight:4},children:(0,t.jsx)(i.JO,{name:"cancel"})}):void 0},inputValueRenderer:function(){return 1===r.length?r[0].groupName:r.length>1?"".concat(r.length," groups"):""},itemPredicate:function(e,n){return 0===e.length||n.groupName.toLowerCase().includes(e.toLowerCase())},itemsEqual:l(),itemRenderer:function(e,n){return(0,t.jsx)(s.sN,{active:n.modifiers.active,onClick:n.handleClick,text:(0,t.jsxs)(a.x,{flex:{direction:"row",gap:6,alignItems:"center"},margin:{left:4},style:{maxWidth:"500px"},children:[(0,t.jsx)(u.X,{checked:r.some(function(n){return l()(n,e)}),size:"small",readOnly:!0}),(0,t.jsx)(a.x,{flex:{direction:"row",alignItems:"center",grow:1,shrink:1},style:{overflow:"hidden"},children:(0,t.jsxs)("div",{style:{overflow:"hidden"},children:[e.groupName,f?(0,t.jsx)("span",{style:{opacity:.5,paddingLeft:4},children:(0,g.At)(e.repositoryName,e.repositoryLocationName)}):void 0]})})]})},JSON.stringify(e))},noResults:(0,t.jsx)(s.sN,{disabled:!0,text:"No asset groups"}),closeOnSelect:!1,resetOnQuery:!1,onItemSelect:function(e){var n=r.filter(function(n){return!l()(e,n)});n.length===r.length&&n.push(e),c(n)}})};function v(e){return e.definition&&e.definition.groupName?{groupName:e.definition.groupName,repositoryName:e.definition.repository.name,repositoryLocationName:e.definition.repository.location.name}:null}},18663:function(e,n,r){r.r(n),r.d(n,{AssetsGroupsGlobalGraphRoot:function(){return _},default:function(){return A}});var t=r(85333),o=r(6692),i=r(58467),s=r(52322),a=r(28888),u=r(17131),c=r(81308),l=r(18149),p=r.n(l),d=r(2784),f=r(7267),m=r(42760),g=r(18399),h=r(71897),x=r(10397),y=r(77376),v=r(16292),N=r(51969),j=r(37160),b=d.memo(function(e){var n,r=e.assetGroups,t=e.visibleAssetGroups,o=e.setGroupFilters,i=d.useContext(N.C5),a=i.allRepos,u=i.visibleRepos,c=i.toggleVisible,l=d.useMemo(function(){return new Set(u)},[u]),p=(0,v.im)({name:"Code location",icon:"repo",allValues:a.map(function(e){return{key:e.repository.id,value:e,match:[(0,j.At)(e.repository.name,e.repositoryLocation.name)]}}),menuWidth:"300px",renderLabel:function(e){var n=e.value;return(0,s.jsxs)(g.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,s.jsx)(h.JO,{name:"repo"}),(0,s.jsx)(x.rd,{text:(0,j.At)(n.repository.name,n.repositoryLocation.name)})]})},getStringValue:function(e){return(0,j.At)(e.repository.name,e.repositoryLocation.name)},initialState:l,onStateChanged:function(e){a.forEach(function(n){l.has(n)!==e.has(n)&&c([(0,j.kQ)(n.repository.name,n.repositoryLocation.name)])})}}),f=(0,v.im)({name:"Asset Groups",icon:"asset_group",allValues:(r||[]).map(function(e){return{key:e.groupName,value:null!==(n=null==t?void 0:t.find(function(n){return n.groupName===e.groupName&&n.repositoryName===e.repositoryName&&n.repositoryLocationName===e.repositoryLocationName}))&&void 0!==n?n:e,match:[e.groupName]}}),menuWidth:"300px",renderLabel:function(e){var n=e.value;return(0,s.jsxs)(g.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,s.jsx)(h.JO,{name:"repo"}),(0,s.jsx)(x.rd,{tooltipText:n.groupName+" - "+(0,j.At)(n.repositoryName,n.repositoryLocationName),text:(0,s.jsxs)(s.Fragment,{children:[n.groupName,(0,s.jsx)("span",{style:{opacity:.5,paddingLeft:"4px"},children:(0,j.At)(n.repositoryName,n.repositoryLocationName)})]})})]})},getStringValue:function(e){return e.groupName},initialState:d.useMemo(function(){return new Set(null!=t?t:[])},[t]),onStateChanged:function(e){o&&o(Array.from(e))}}),m=[];a.length>1&&m.push(p),r&&m.push(f);var b=(0,y.m)({filters:m}).button;return a.length<=1&&!r?null:b}),C=r(28252),L=r(71277),w=r(39852),k=r(18774),O=r(74711),R=r(72254),_=function(){var e=(0,f.UO)()[0],n=d.useContext(N.C5).visibleRepos,r=(0,f.k6)(),l=(0,i._)((0,L.q)({encode:function(e){return{groups:JSON.stringify(e.groups)}},decode:function(e){return{groups:e.groups?JSON.parse(e.groups):[]}}}),2),g=l[0],h=l[1];(0,C.j)("Global Asset Lineage");var x=d.useCallback(function(e,n){r[n]({pathname:(0,R.Cd)(e),search:r.location.search})},[r]),y=d.useCallback(function(e){r.push((0,O.p)(e.assetKey,{view:"definition"}))},[r]),v=d.useMemo(function(){return{hideEdgesToNodesOutsideQuery:!1,hideNodesMatching:function(e){var r;if(!n.some(function(n){return n.repositoryLocation.name===e.repository.location.name&&n.repository.name===e.repository.name}))return!0;if(null===(r=g.groups)||void 0===r?void 0:r.length){var t=(0,k.$H)({definition:e});if(!g.groups.some(function(e){return p()(e,t)}))return!0}return!1}}},[g.groups,n]),j=d.useMemo(function(){return n.flatMap(function(e){return e.repository.assetGroups.map(function(n){return{groupName:n.groupName,repositoryLocationName:e.repositoryLocation.name,repositoryName:e.repository.name}})})},[n]);return(0,s.jsxs)(a.T,{style:{display:"flex",flexDirection:"column",paddingBottom:0},children:[(0,s.jsx)(u.m,{title:(0,s.jsx)(c.X6,{children:"Global Asset Lineage"}),right:(0,s.jsx)(w.i,{label:"Reload definitions"})}),(0,s.jsx)(m.OK,{fetchOptions:v,fetchOptionFilters:(0,s.jsx)(b,{assetGroups:j,visibleAssetGroups:d.useMemo(function(){return g.groups||[]},[g.groups]),setGroupFilters:d.useCallback(function(e){return h((0,o._)((0,t._)({},g),{groups:e}))},[g,h])}),options:{preferAssetRendering:!0,explodeComposites:!0},explorerPath:(0,R.Lu)(e),onChangeExplorerPath:x,onNavigateToSourceAssetNode:y})]})},A=_},72254:function(e,n,r){r.d(n,{Cd:function(){return u},Lu:function(){return c},TJ:function(){return l}});var t=r(85333),o=r(6692),i=r(35157),s=r(88286),a="__GLOBAL__";function u(e){var n=(0,s.gY)((0,o._)((0,t._)({},e),{pipelineName:a})).replace(a,"");return"/asset-groups".concat(n)}function c(e){return(0,s.p3)(a+e||"/")}function l(e){var n=e.map(function(e){return"".concat((0,i.Je)(e),"*")}).join(", ");return u({opNames:n.length>16e3?[]:[e.map(i.Je).join(",")],opsQuery:n})}},39852:function(e,n,r){r.d(n,{i:function(){return m}});var t=r(58467),o=r(52322),i=r(43180),s=r(9001),a=r(71897),u=r(10952),c=r(2784),l=r(54949),p=r(56266),d=r(40092),f=r(70958),m=function(e){var n=e.label,r=void 0===n?"Reload all":n,m=(0,l.WB)(),g=m.permissions.canReloadWorkspace,h=m.disabledReasons,x=(0,d.Dc)({scope:"workspace",reloadFn:d.rL}),y=x.reloading,v=x.tryReload,N=x.error,j=x.errorLocationId,b=(0,t._)(c.useState(!!N),2),C=b[0],L=b[1];return(c.useEffect(function(){return L(!!N)},[N]),g)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.zx,{onClick:v,icon:(0,o.jsx)(a.JO,{name:"refresh"}),loading:y,intent:"none",children:r}),j?(0,o.jsx)(f.V,{error:N,location:j,reloading:y,onTryReload:v,onDismiss:function(){return L(!1)},isOpen:C}):(0,o.jsxs)(u.Vq,{icon:"error",title:"Reload error",canEscapeKeyClose:!1,canOutsideClickClose:!1,style:{width:"90%"},isOpen:C,children:[(0,o.jsx)(u.a7,{children:N&&(0,o.jsx)(p.T9,{error:N})}),(0,o.jsx)(u.cN,{children:(0,o.jsx)(s.zx,{onClick:function(){return L(!1)},children:"Dismiss"})})]})]}):(0,o.jsx)(i.u,{content:h.canReloadWorkspace,children:(0,o.jsx)(s.zx,{icon:(0,o.jsx)(a.JO,{name:"refresh"}),disabled:!0,intent:"none",children:r})})}}}]);
//# sourceMappingURL=663.64fea04e728189f8.js.map