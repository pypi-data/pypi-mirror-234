(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[948],{30733:function(t,n,e){var i=e(96738);function o(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw TypeError("Expected a function");var e=function(){var i=arguments,o=n?n.apply(this,i):i[0],r=e.cache;if(r.has(o))return r.get(o);var a=t.apply(this,i);return e.cache=r.set(o,a)||r,a};return e.cache=new(o.Cache||i),e}o.Cache=i,t.exports=o},26778:function(t,n,e){"use strict";function i(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=Array(n);e<n;e++)i[e]=t[e];return i}function o(t,n){if(t){if("string"==typeof t)return i(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);if("Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return i(t,n)}}function r(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e,i,o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var r=[],a=!0,u=!1;try{for(o=o.call(t);!(a=(e=o.next()).done)&&(r.push(e.value),!n||r.length!==n);a=!0);}catch(t){u=!0,i=t}finally{try{a||null==o.return||o.return()}finally{if(u)throw i}}return r}}(t,n)||o(t,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a=e(46506),u=e(3440),h=e.n(u),d="group__",s=function(t,n){var e=new a.graphlib.Graph({compound:!0});e.setGraph(n.horizontalDAGs?{rankdir:"LR",marginx:100,marginy:100,nodesep:-10,edgesep:10,ranksep:60}:{rankdir:"TB",marginx:100,marginy:100,nodesep:40,edgesep:10,ranksep:10}),e.setDefaultEdgeLabel(function(){return{}});var i=function(t){return[d,t.definition.repository.location.name,t.definition.repository.name,t.definition.groupName].join("__")},o=function(t){return t},u=Object.values(t.nodes).filter(o),s={},y=!0,m=!1,g=void 0;try{for(var v,b=u[Symbol.iterator]();!(y=(v=b.next()).done);y=!0){var x=v.value;if(x.definition.groupName){var w=i(x);s[w]={id:w,groupName:x.definition.groupName,repositoryName:x.definition.repository.name,repositoryLocationName:x.definition.repository.location.name,repositoryDisambiguationRequired:!1,bounds:{x:0,y:0,width:0,height:0}}}}}catch(t){m=!0,g=t}finally{try{y||null==b.return||b.return()}finally{if(m)throw g}}var E=Object.keys(s).length>1;E&&Object.keys(s).forEach(function(t){return e.setNode(t,{})}),u.forEach(function(t){e.setNode(t.id,p(t.definition)),E&&t.definition.groupName&&e.setParent(t.id,i(t))});var O={};Object.entries(t.downstream).forEach(function(n){var i=r(n,2),a=i[0];Object.keys(i[1]).forEach(function(n){(o(t.nodes[n])||o(t.nodes[a]))&&(e.setEdge({v:a,w:n},{weight:1}),o(t.nodes[n])?o(t.nodes[a])||(O[a]=!0):O[n]=!0)})}),Object.keys(O).forEach(function(t){var i=JSON.parse(t),o=i[i.length-1]||"";e.setNode(t,f(o,n))}),a.layout(e);var N=0,j=0,M={};if(e.nodes().forEach(function(t){var n=e.node(t);if(n){var i={x:n.x-n.width/2,y:n.y-n.height/2,width:n.width,height:n.height};t.startsWith(d)||(M[t]={id:t,bounds:i}),N=Math.max(N,n.x+n.width/2),j=Math.max(j,n.y+n.height/2)}}),E){var S=!0,k=!1,A=void 0;try{for(var G,I=u[Symbol.iterator]();!(S=(G=I.next()).done);S=!0){var B=G.value;if(B.definition.groupName){var D=s[i(B)];D.bounds=0===D.bounds.width?M[B.id].bounds:c(D.bounds,M[B.id].bounds)}}}catch(t){k=!0,A=t}finally{try{S||null==I.return||I.return()}finally{if(k)throw A}}var _=!0,L=!1,C=void 0;try{for(var T,z=Object.values(s)[Symbol.iterator]();!(_=(T=z.next()).done);_=!0){var R=T.value;R.bounds=l(R.bounds,{x:15,top:70,bottom:-10})}}catch(t){L=!0,C=t}finally{try{_||null==z.return||z.return()}finally{if(L)throw C}}}Object.values(h()(Object.values(s),function(t){return t.groupName})).filter(function(t){return t.length>1}).flat().forEach(function(t){t.bounds.y-=18,t.bounds.height+=18,t.repositoryDisambiguationRequired=!0});var q=[];return e.edges().forEach(function(t){var i=e.node(t.v),o=O[t.v]?16:24,r=e.node(t.w),a=O[t.w]?16:24;q.push(n.horizontalDAGs?{from:{x:i.x+i.width/2,y:i.y},fromId:t.v,to:{x:r.x-r.width/2-5,y:r.y},toId:t.w}:{from:{x:i.x-i.width/2+o,y:i.y-30+i.height/2},fromId:t.v,to:{x:r.x-r.width/2+a,y:r.y+20-r.height/2},toId:t.w})}),{nodes:M,edges:q,width:N+100,height:j+100,groups:E?s:{}}},f=function(t,n){return n.horizontalDAGs?{width:32+8*Math.min(10,t.length),height:90}:{width:106,height:90}},l=function(t,n){return{x:t.x-n.x,y:t.y-n.top,width:t.width+2*n.x,height:t.height+n.top+n.bottom}},c=function(t,n){var e=Math.min(t.x,n.x),i=Math.min(t.y,n.y);return{x:e,y:i,width:Math.max(t.x+t.width,n.x+n.width)-e,height:Math.max(t.y+t.height,n.y+n.height)-i}},p=function(t){if(t.isSource&&!t.isObservable)return{width:265,height:102};var n=100;return t.isPartitioned&&(n+=40),t.isSource?n+=30:n+=26,{width:265,height:n+=30}},y=function(t){return"result"!==t.solid.name?"".concat(t.solid.name,":").concat(t.definition.name):t.solid.name};function m(t){var n={};return t.forEach(function(t){return t.forEach(function(t){return n[y(t)]=t})}),Object.values(n)}function g(t,n,e){var i=e-166,o=Math.max(200,i/t.length),r=83+Math.min(0,(i-t.length*o)/2),a=o<300?20:0,u={};return t.forEach(function(t,e){u[y(t)]={x:r+e*o,y:n+a*(1-e%2*2)}}),u}function v(t,n){var e=n.y,r=function(t,r,a){var u,h=((function(t){if(Array.isArray(t))return i(t)})(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||o(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).sort(function(t,n){return r(t).localeCompare(r(n))}),d=0,s=null,f={},l=Math.min(35,370/(h.length+1));h.forEach(function(t,i){var o=a(t);o!==s?(s=o,u={port:{x:n.x+d+13,y:e+13},collapsed:[],label:!1,layout:{x:n.x+d,y:e,width:35,height:26}},f[t.definition.name]=u,d+=l):(0===u.collapsed.length&&(d+=15),u.collapsed.push(t.definition.name))});var c=(370-(d-13+35))/2;return Object.values(f).forEach(function(t){t.layout.x+=c,t.port.x+=c}),e+=26,f},a=function(t){var i={};return t.forEach(function(t){i[t.definition.name]={port:{x:n.x+13,y:e+13},label:!0,collapsed:[],layout:{x:n.x,y:e,width:0,height:26}},e+=26}),i},u=t.inputs.length>4?r(t.inputs,function(t){return t.definition.name},function(t){var n;return(null===(n=t.dependsOn[0])||void 0===n?void 0:n.solid.name)||""}):a(t.inputs),h={x:n.x,y:Math.max(n.y,e-0),width:370,height:52};e+=52,t.definition.assetNodes.length&&t.definition.description&&(h.height+=22,e+=22);var d=t.outputs.length>4?r(t.outputs,function(t){var n;return(null===(n=t.dependedBy[0])||void 0===n?void 0:n.definition.name)||""},function(t){var n;return(null===(n=t.dependedBy[0])||void 0===n?void 0:n.solid.name)||""}):a(t.outputs);return{bounds:{x:n.x-5,y:n.y-5,width:380,height:e-n.y+10},op:h,inputs:u,outputs:d}}self.addEventListener("message",function(t){var n=t.data;switch(n.type){case"layoutOpGraph":var e,i,o,u,h,d,f,l,c,p,y,b,x,w,E,O=n.ops,N=n.opts;self.postMessage((h=new a.graphlib.Graph,d=0,f=100,l=100,N.parentOp&&(f=(l=140)+(d=26*Math.max(N.parentOp.inputs.length,N.parentOp.outputs.length))),h.setGraph({rankdir:"TB",marginx:l,marginy:f}),h.setDefaultEdgeLabel(function(){return{}}),c=[],p={},O.forEach(function(t){p[t.name]=!0}),O.forEach(function(t){var n=v(t,{x:0,y:0});h.setNode(t.name,{width:n.bounds.width,height:n.bounds.height}),t.inputs.forEach(function(n){n.dependsOn.forEach(function(e){p[e.solid.name]&&p[t.name]&&(h.setEdge({v:e.solid.name,w:t.name},{weight:1}),c.push({from:{point:{x:0,y:0},opName:e.solid.name,edgeName:e.definition.name},to:{point:{x:0,y:0},opName:t.name,edgeName:n.definition.name}}))})})}),a.layout(h),y={},b={},h.nodes().forEach(function(t){var n=h.node(t);n&&(b[t]=n)}),x=0,w=0,Object.entries(b).forEach(function(t){var n=r(t,2),e=n[0],i=n[1],o=O.find(function(t){return t.name===e});if(o){var a=i.x-i.width/2,u=i.y-i.height/2;y[e]=v(o,{x:a,y:u}),x=Math.max(x,a+i.width),w=Math.max(w,u+i.height)}}),h.edges().forEach(function(t){var n=c.find(function(n){return n.from.opName===t.v&&n.to.opName===t.w}),e=h.edge(t).points;n&&e.length>0&&(n.from.point=e[0],n.to.point=e[e.length-1])}),E={edges:c,nodes:y,width:x+l,height:w+f,parent:null},N.parentOp&&(E.parent=(e=N.parentOp,i=d,u=(o={invocationBoundingBox:{x:1,y:1,width:E.width-1,height:E.height-1},bounds:{x:70,y:70+i,width:E.width-140,height:E.height-(70+i)*2},mappingLeftEdge:50,mappingLeftSpacing:10,inputs:{},outputs:{},dependsOn:g(m(e.inputs.map(function(t){return t.dependsOn})),-50,E.width),dependedBy:g(m(e.outputs.map(function(t){return t.dependedBy})),E.height+50,E.width)}).bounds.y+o.bounds.height,e.inputs.forEach(function(t,n){o.inputs[t.definition.name]={layout:{x:o.bounds.x,y:o.bounds.y-26*n-26,width:0,height:26},collapsed:[],label:!0,port:{x:o.bounds.x+13,y:o.bounds.y-26*n-13}}}),e.outputs.forEach(function(t,n){o.outputs[t.definition.name]={layout:{x:o.bounds.x,y:u+26*n,width:0,height:26},collapsed:[],label:!0,port:{x:o.bounds.x+13,y:u+26*n+13}}}),o)),E));break;case"layoutAssetGraph":var j=n.graphData,M=n.opts;self.postMessage(s(j,M))}})}}]);
//# sourceMappingURL=948.66829647058dbf2c.js.map