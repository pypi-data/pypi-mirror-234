"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[40003,55424],{72043:function(e,t,n){n.d(t,{A:function(){return a}});var r=n(23158),i=n(25101),o=n(66477),a=function(e,t,n,a,s){return n.time_zone===o.c_.server?function(e,t,n,o){var a=n((0,r.Z)(e,t),o);return(0,i.Z)(a,t)}(e,a.time_zone,t,s):t(e,s)}},92306:function(e,t,n){n.d(t,{v:function(){return i}});var r=n(40039),i=function(e,t){var n,i={},o=(0,r.Z)(e);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=t(a);s in i?i[s].push(a):i[s]=[a]}}catch(c){o.e(c)}finally{o.f()}return i}},36226:function(e,t,n){var r,i=n(88962),o=n(33368),a=n(71650),s=n(82390),c=n(69205),u=n(70906),l=n(91808),h=n(73968),d=n(71711),f=n(68144),p=n(79932);(0,l.Z)([(0,p.Mo)("ha-top-app-bar-fixed")],(function(e,t){var n=function(t){(0,c.Z)(r,t);var n=(0,u.Z)(r);function r(){var t;(0,a.Z)(this,r);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return t=n.call.apply(n,[this].concat(o)),e((0,s.Z)(t)),t}return(0,o.Z)(r)}(t);return{F:n,d:[{kind:"field",static:!0,key:"styles",value:function(){return[d.W,(0,f.iv)(r||(r=(0,i.Z)([".mdc-top-app-bar__row{height:var(--header-height);border-bottom:var(--app-header-border-bottom)}.mdc-top-app-bar--fixed-adjust{padding-top:var(--header-height)}.mdc-top-app-bar{--mdc-typography-headline6-font-weight:400;color:var(--app-header-text-color,var(--mdc-theme-on-primary,#fff));background-color:var(--app-header-background-color,var(--mdc-theme-primary))}"])))]}}]}}),h.s)},81582:function(e,t,n){n.d(t,{DJ:function(){return a},LZ:function(){return i},Nn:function(){return h},Ny:function(){return d},Pk:function(){return p},Q4:function(){return o},RQ:function(){return c},SO:function(){return u},T0:function(){return f},iJ:function(){return l},pB:function(){return s}});var r=n(53709),i=["migration_error","setup_error","setup_retry"],o=["not_loaded","loaded","setup_error","setup_retry"],a=function(e,t,n){var r={type:"config_entries/subscribe"};return n&&n.type&&(r.type_filter=n.type),e.connection.subscribeMessage((function(e){return t(e)}),r)},s=function(e,t){var n={};return t&&(t.type&&(n.type_filter=t.type),t.domain&&(n.domain=t.domain)),e.callWS(Object.assign({type:"config_entries/get"},n))},c=function(e,t){return e.callWS({type:"config_entries/get_single",entry_id:t})},u=function(e,t,n){return e.callWS(Object.assign({type:"config_entries/update",entry_id:t},n))},l=function(e,t){return e.callApi("DELETE","config/config_entries/entry/".concat(t))},h=function(e,t){return e.callApi("POST","config/config_entries/entry/".concat(t,"/reload"))},d=function(e,t){return e.callWS({type:"config_entries/disable",entry_id:t,disabled_by:"user"})},f=function(e,t){return e.callWS({type:"config_entries/disable",entry_id:t,disabled_by:null})},p=function(e,t){var n=(0,r.Z)(e),i=function(e){var n=t[e.domain];return"helper"===(null==n?void 0:n.integration_type)?-1:1};return n.sort((function(e,t){return i(t)-i(e)}))}},55424:function(e,t,n){n.d(t,{Bm:function(){return Z},Cj:function(){return A},G9:function(){return K},Jj:function(){return j},KU:function(){return S},P:function(){return C},UB:function(){return W},ZC:function(){return P},_Z:function(){return H},b:function(){return F},gy:function(){return L},iK:function(){return x},jB:function(){return z},o1:function(){return w},rl:function(){return D},vE:function(){return U},xZ:function(){return T},yH:function(){return B}});var r=n(53709),i=n(68990),o=n(40039),a=n(99312),s=n(81043),c=n(24112),u=n(32182),l=n(79021),h=n(39244),d=n(59429),f=n(93752),p=n(59699),_=n(97330),y=n(72043),v=n(49684),g=n(92306),m=n(81582),b=n(38014),k=[],Z=function(){return{stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}},w=function(){return{stat_energy_to:"",stat_compensation:null,entity_energy_price:null,number_energy_price:null}},x=function(){return{type:"grid",flow_from:[],flow_to:[],cost_adjustment_day:0}},D=function(){return{type:"solar",stat_energy_from:"",config_entry_solar_forecast:null}},C=function(){return{type:"battery",stat_energy_from:"",stat_energy_to:""}},S=function(){return{type:"gas",stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}},A=function(){return{type:"water",stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}},T=function(e){return e.callWS({type:"energy/info"})},L=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadBackendTranslation("issues","energy");case 2:return e.abrupt("return",t.callWS({type:"energy/validate"}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(e){return e.callWS({type:"energy/get_prefs"})},H=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.callWS(Object.assign({type:"energy/save_prefs"},n)),M(t),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i,o){var s,c=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=c.length>5&&void 0!==c[5]?c[5]:"hour",e.abrupt("return",t.callWS({type:"energy/fossil_energy_consumption",start_time:n.toISOString(),end_time:null==o?void 0:o.toISOString(),energy_statistic_ids:r,co2_statistic_id:i,period:s}));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}(),j=function(e){return(0,g.v)(e.energy_sources,(function(e){return e.type}))},B=function(e,t,n){var r,i=[],a=(0,o.Z)(e.energy_sources);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(!n||n.includes(s.type))if("solar"!==s.type)if("gas"!==s.type&&"water"!==s.type)if("battery"!==s.type){var c,u=(0,o.Z)(s.flow_from);try{for(u.s();!(c=u.n()).done;){var l=c.value;i.push(l.stat_energy_from),l.stat_cost&&i.push(l.stat_cost);var h=t.cost_sensors[l.stat_energy_from];h&&i.push(h)}}catch(v){u.e(v)}finally{u.f()}var d,f=(0,o.Z)(s.flow_to);try{for(f.s();!(d=f.n()).done;){var p=d.value;i.push(p.stat_energy_to),p.stat_compensation&&i.push(p.stat_compensation);var _=t.cost_sensors[p.stat_energy_to];_&&i.push(_)}}catch(v){f.e(v)}finally{f.f()}}else i.push(s.stat_energy_from),i.push(s.stat_energy_to);else{i.push(s.stat_energy_from),s.stat_cost&&i.push(s.stat_cost);var y=t.cost_sensors[s.stat_energy_from];y&&i.push(y)}else i.push(s.stat_energy_from)}}catch(v){a.e(v)}finally{a.f()}return i},O=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,s,d,f){var p,_,y,v,g,k,Z,w,x,D,C,S,A,L,P,H,j,O,M,W,z,E,K,U,F,I,N,R,q,Q,J,G,X,Y,$,ee,te,ne,re,ie,oe,ae,se,ce,ue,le,he;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,m.pB)(t,{domain:"co2signal"}),T(t)]);case 2:if(p=e.sent,_=(0,i.Z)(p,2),y=_[0],v=_[1],!(g=y.length?y[0]:void 0)){e.next=21;break}Z=0,w=Object.values(t.entities);case 9:if(!(Z<w.length)){e.next=21;break}if("co2signal"===(x=w[Z]).platform){e.next=13;break}return e.abrupt("continue",18);case 13:if((D=t.states[x.entity_id])&&"%"===D.attributes.unit_of_measurement){e.next=16;break}return e.abrupt("continue",18);case 16:return k=D.entity_id,e.abrupt("break",21);case 18:Z++,e.next=9;break;case 21:C=[],S=(0,o.Z)(n.energy_sources);try{for(S.s();!(A=S.n()).done;)if("grid"===(L=A.value).type){P=(0,o.Z)(L.flow_from);try{for(P.s();!(H=P.n()).done;)j=H.value,C.push(j.stat_energy_from)}catch(a){P.e(a)}finally{P.f()}}}catch(a){S.e(a)}finally{S.f()}return O=B(n,v,["grid","solar","battery","gas"]),M=B(n,v,["water"]),W=[].concat((0,r.Z)(O),(0,r.Z)(M)),z=(0,c.Z)(d||new Date,s),E=z>35?"month":z>2?"day":"hour",K=t.config.unit_system.length||"",U={energy:"kWh",volume:"km"===K?"m³":"ft³"},F={volume:"km"===K?"L":"gal"},I=O.length?(0,b.dL)(t,s,d,O,E,U,["change"]):{},N=M.length?(0,b.dL)(t,s,d,M,E,F,["change"]):{},J={},G={},f&&(q=z>27&&z<32?(0,u.Z)(s,-1):(0,l.Z)(s,-1*(z+1)),Q=(0,h.Z)(s,-1),O.length&&(J=(0,b.dL)(t,q,Q,O,E,U,["change"])),M.length&&(G=(0,b.dL)(t,q,Q,M,E,F,["change"]))),void 0!==k&&(X=V(t,s,C,k,d,z>35?"month":z>2?"day":"hour"),f&&(Y=V(t,q,C,k,Q,z>35?"month":z>2?"day":"hour"))),$={},ee=W.length?(0,b.Py)(t,W):[],e.next=42,Promise.all([I,N,J,G,ee,X,Y]);case 42:return te=e.sent,ne=(0,i.Z)(te,7),re=ne[0],ie=ne[1],oe=ne[2],ae=ne[3],se=ne[4],ce=ne[5],ue=ne[6],le=Object.assign(Object.assign({},re),ie),f&&(R=Object.assign(Object.assign({},oe),ae)),W.length&&se.forEach((function(e){$[e.statistic_id]=e})),he={start:s,end:d,startCompare:q,endCompare:Q,info:v,prefs:n,stats:le,statsMetadata:$,statsCompare:R,co2SignalConfigEntry:g,co2SignalEntity:k,fossilEnergyConsumption:ce,fossilEnergyConsumptionCompare:ue},e.abrupt("return",he);case 56:case"end":return e.stop()}}),e)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}(),M=function(e){k.forEach((function(t){var n=W(e,{key:t});n.clearPrefs(),n._active&&n.refresh()}))},W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="_energy";if(t.key){if(!t.key.startsWith("energy_"))throw new Error("Key need to start with energy_");n="_".concat(t.key)}if(e.connection[n])return e.connection[n];k.push(t.key);var r=(0,_._)(e.connection,n,(0,s.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.prefs){t.next=4;break}return t.next=3,P(e);case 3:r.prefs=t.sent;case 4:return r._refreshTimeout&&clearTimeout(r._refreshTimeout),r._active&&(!r.end||r.end>new Date)&&((n=new Date).getMinutes()>=20&&n.setHours(n.getHours()+1),n.setMinutes(20,0,0),r._refreshTimeout=window.setTimeout((function(){return r.refresh()}),n.getTime()-Date.now())),t.abrupt("return",O(e,r.prefs,r.start,r.end,r.compare));case 7:case"end":return t.stop()}}),t)})))),i=r.subscribe;r.subscribe=function(e){var t=i(e);return r._active++,function(){r._active--,r._active<1&&(clearTimeout(r._refreshTimeout),r._refreshTimeout=void 0),t()}},r._active=0,r.prefs=t.prefs;var o=new Date,c=(0,v.Zs)(o,e.locale,e.config).split(":")[0];r.start=(0,y.A)("0"===c?(0,l.Z)(o,-1):o,d.Z,e.locale,e.config),r.end=(0,y.A)("0"===c?(0,l.Z)(o,-1):o,f.Z,e.locale,e.config);var u=function t(){r._updatePeriodTimeout=window.setTimeout((function(){r.start=(0,y.A)(new Date,d.Z,e.locale,e.config),r.end=(0,y.A)(new Date,f.Z,e.locale,e.config),t()}),(0,p.Z)((0,y.A)(o,f.Z,e.locale,e.config),1).getTime()-Date.now())};return u(),r.clearPrefs=function(){r.prefs=void 0},r.setPeriod=function(t,n){var i;r.start=t,r.end=n,r.start.getTime()!==(0,y.A)(new Date,d.Z,e.locale,e.config).getTime()||(null===(i=r.end)||void 0===i?void 0:i.getTime())!==(0,y.A)(new Date,f.Z,e.locale,e.config).getTime()||r._updatePeriodTimeout?r._updatePeriodTimeout&&(clearTimeout(r._updatePeriodTimeout),r._updatePeriodTimeout=void 0):u()},r.setCompare=function(e){r.compare=e},r},z=function(e){return e.callWS({type:"energy/solar_forecast"})},E=["volume","energy"],K=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=(0,o.Z)(e.energy_sources);try{for(i.s();!(t=i.n()).done;){var a=t.value;if("gas"===a.type&&(!r||r!==a.stat_energy_from)){var s=n[a.stat_energy_from];if(E.includes(null==s?void 0:s.unit_class))return s.unit_class}}}catch(c){i.e(c)}finally{i.f()}},U=function(e,t){var n=K(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});if(void 0!==n)return"energy"===n?"kWh":"km"===e.config.unit_system.length?"m³":"ft³"},F=function(e){return"km"===e.config.unit_system.length?"L":"gal"}},73826:function(e,t,n){n.d(t,{f:function(){return f}});var r=n(40039),i=n(33368),o=n(71650),a=n(82390),s=n(69205),c=n(70906),u=n(91808),l=n(34541),h=n(47838),d=n(79932),f=function(e){var t=(0,u.Z)(null,(function(e,t){var n=function(t){(0,s.Z)(r,t);var n=(0,c.Z)(r);function r(){var t;(0,o.Z)(this,r);for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return t=n.call.apply(n,[this].concat(s)),e((0,a.Z)(t)),t}return(0,i.Z)(r)}(t);return{F:n,d:[{kind:"field",decorators:[(0,d.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:void 0},{kind:"field",key:"__unsubs",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,l.Z)((0,h.Z)(n.prototype),"connectedCallback",this).call(this),this.__checkSubscribed()}},{kind:"method",key:"disconnectedCallback",value:function(){if((0,l.Z)((0,h.Z)(n.prototype),"disconnectedCallback",this).call(this),this.__unsubs){for(;this.__unsubs.length;){var e=this.__unsubs.pop();e instanceof Promise?e.then((function(e){return e()})):e()}this.__unsubs=void 0}}},{kind:"method",key:"updated",value:function(e){if((0,l.Z)((0,h.Z)(n.prototype),"updated",this).call(this,e),e.has("hass"))this.__checkSubscribed();else if(this.hassSubscribeRequiredHostProps){var t,i=(0,r.Z)(e.keys());try{for(i.s();!(t=i.n()).done;){var o=t.value;if(this.hassSubscribeRequiredHostProps.includes(o))return void this.__checkSubscribed()}}catch(a){i.e(a)}finally{i.f()}}}},{kind:"method",key:"hassSubscribe",value:function(){return[]}},{kind:"method",key:"__checkSubscribed",value:function(){var e,t=this;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(e=this.hassSubscribeRequiredHostProps)&&void 0!==e&&e.some((function(e){return void 0===t[e]}))||(this.__unsubs=this.hassSubscribe())}}]}}),e);return t}},40003:function(e,t,n){n.r(t);var r,i,o,a=n(99312),s=n(81043),c=n(88962),u=n(33368),l=n(71650),h=n(82390),d=n(69205),f=n(70906),p=n(91808),_=n(68144),y=n(79932),v=(n(48932),n(11654)),g=(n(23754),n(51292),n(36226),{views:[{strategy:{type:"energy"}}]});(0,p.Z)([(0,y.Mo)("ha-panel-energy")],(function(e,t){var n=function(t){(0,d.Z)(r,t);var n=(0,f.Z)(r);function r(){var t;(0,l.Z)(this,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=n.call.apply(n,[this].concat(o)),e((0,h.Z)(t)),t}return(0,u.Z)(r)}(t);return{F:n,d:[{kind:"field",decorators:[(0,y.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,y.Cb)({type:Boolean,reflect:!0})],key:"narrow",value:void 0},{kind:"field",decorators:[(0,y.SB)()],key:"_viewIndex",value:function(){return 0}},{kind:"field",decorators:[(0,y.SB)()],key:"_lovelace",value:void 0},{kind:"method",key:"willUpdate",value:function(e){if(this.hasUpdated||this.hass.loadFragmentTranslation("lovelace"),e.has("hass")){var t=e.get("hass");(null==t?void 0:t.locale)!==this.hass.locale&&this._setLovelace()}}},{kind:"method",key:"updated",value:function(e){e.has("narrow")&&void 0!==e.get("narrow")&&this._reloadView()}},{kind:"method",key:"render",value:function(){return(0,_.dy)(r||(r=(0,c.Z)([' <ha-top-app-bar-fixed> <ha-menu-button slot="navigationIcon" .hass="','" .narrow="','"></ha-menu-button> <div slot="title">',"</div> ",' <hui-view .hass="','" .narrow="','" .lovelace="','" .index="','" @reload-energy-panel="','"></hui-view> </ha-top-app-bar-fixed> '])),this.hass,this.narrow,this.hass.localize("panel.energy"),this.narrow?"":(0,_.dy)(i||(i=(0,c.Z)([' <hui-energy-period-selector slot="actionItems" .hass="','" collectionKey="energy_dashboard" .narrow="','"></hui-energy-period-selector> '])),this.hass,!1),this.hass,this.narrow,this._lovelace,this._viewIndex,this._reloadView)}},{kind:"method",key:"_setLovelace",value:function(){var e,t;this._lovelace={config:g,rawConfig:g,editMode:!1,urlPath:"energy",mode:"generated",locale:this.hass.locale,enableFullEditMode:function(){},saveConfig:(t=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),deleteConfig:(e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),setEditMode:function(){}}}},{kind:"method",key:"_reloadView",value:function(){var e=this._lovelace.config;this._lovelace=Object.assign(Object.assign({},this._lovelace),{},{config:Object.assign(Object.assign({},e),{},{views:[Object.assign({},e.views[0])]})})}},{kind:"get",static:!0,key:"styles",value:function(){return[v.Qx,(0,_.iv)(o||(o=(0,c.Z)(["hui-energy-period-selector{width:100%;padding-left:16px;padding-inline-start:16px;--disabled-text-color:rgba(var(--rgb-text-primary-color), 0.5);direction:var(--direction)}"])))]}}]}}),_.oi)},23754:function(e,t,n){var r,i,o,a,s=n(88962),c=n(33368),u=n(71650),l=n(82390),h=n(69205),d=n(70906),f=n(91808),p=n(34541),_=n(47838),y=(n(53918),n(27088)),v=n(82045),g=n(70390),m=n(59429),b=n(59401),k=n(13250),Z=n(69388),w=n(79021),x=n(33651),D=n(32182),C=n(27605),S=n(93752),A=n(59281),T=n(1905),L=n(70451),P=n(24112),H=n(68144),V=n(79932),j=n(72043),B=n(26410),O=n(12198),M=n(70518),W=n(87744),z=(n(42657),n(10983),n(14471),n(17623),n(55424)),E=n(73826);(0,f.Z)([(0,V.Mo)("hui-energy-period-selector")],(function(e,t){var n=function(t){(0,h.Z)(r,t);var n=(0,d.Z)(r);function r(){var t;(0,u.Z)(this,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=n.call.apply(n,[this].concat(o)),e((0,l.Z)(t)),t}return(0,c.Z)(r)}(t);return{F:n,d:[{kind:"field",decorators:[(0,V.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,V.Cb)()],key:"collectionKey",value:void 0},{kind:"field",decorators:[(0,V.Cb)({type:Boolean,reflect:!0})],key:"narrow",value:void 0},{kind:"field",decorators:[(0,V.SB)()],key:"_startDate",value:void 0},{kind:"field",decorators:[(0,V.SB)()],key:"_endDate",value:void 0},{kind:"field",decorators:[(0,V.SB)()],key:"_period",value:void 0},{kind:"field",decorators:[(0,V.SB)()],key:"_compare",value:function(){return!1}},{kind:"method",key:"connectedCallback",value:function(){(0,p.Z)((0,_.Z)(n.prototype),"connectedCallback",this).call(this),!1!==this.narrow&&(0,M.X)(this,"narrow",this.offsetWidth<600)}},{kind:"method",key:"hassSubscribe",value:function(){var e=this;return[(0,z.UB)(this.hass,{key:this.collectionKey}).subscribe((function(t){return e._updateDates(t)}))]}},{kind:"method",key:"render",value:function(){if(!this.hass||!this._startDate)return H.Ld;var e=[{label:this.hass.localize("ui.panel.lovelace.components.energy_period_selector.day"),value:"day"},{label:this.hass.localize("ui.panel.lovelace.components.energy_period_selector.week"),value:"week"},{label:this.hass.localize("ui.panel.lovelace.components.energy_period_selector.month"),value:"month"},{label:this.hass.localize("ui.panel.lovelace.components.energy_period_selector.year"),value:"year"}];return(0,H.dy)(r||(r=(0,s.Z)([' <div class="row"> <div class="label"> ',' <ha-icon-button-prev .label="','" @click="','"></ha-icon-button-prev> <ha-icon-button-next .label="','" @click="','"></ha-icon-button-next> <mwc-button dense outlined @click="','"> ',' </mwc-button> </div> <div class="period"> <ha-button-toggle-group .buttons="','" .active="','" dense @value-changed="','" .dir="','"></ha-button-toggle-group> '," </div> </div> "])),"day"===this._period?(0,O.p6)(this._startDate,this.hass.locale,this.hass.config):"month"===this._period?(0,O.NC)(this._startDate,this.hass.locale,this.hass.config):"year"===this._period?(0,O.yQ)(this._startDate,this.hass.locale,this.hass.config):"".concat((0,O.mn)(this._startDate,this.hass.locale,this.hass.config)," – ").concat((0,O.mn)(this._endDate||new Date,this.hass.locale,this.hass.config)),this.hass.localize("ui.panel.lovelace.components.energy_period_selector.previous"),this._pickPrevious,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.next"),this._pickNext,this._pickToday,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.today"),e,this._period,this._handleView,(0,W.Zu)(this.hass),this.narrow?(0,H.dy)(i||(i=(0,s.Z)(['<ha-icon-button class="compare ','" .path="','" @click="','" dense outlined> '," </ha-icon-button>"])),this._compare?"active":"",this._compare?"M19 5H14V3H19C20.1 3 21 3.9 21 5V13.4C20.4 13.2 19.7 13 19 13V5M10 1H12V23H10V21H5C3.9 21 3 20.1 3 19V5C3 3.9 3.9 3 5 3H10V1M10 12L5 18H10V12M15.7 14L14 12V15.7C14.4 15 15 14.5 15.7 14M21.1 15.5L19 17.6L16.9 15.5L15.5 16.9L17.6 19L15.5 21.1L16.9 22.5L19 20.4L21.1 22.5L22.5 21.1L20.4 19L22.5 16.9L21.1 15.5Z":"M19,3H14V5H19V18L14,12V21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M10,18H5L10,12M10,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H10V23H12V1H10V3Z",this._toggleCompare,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.compare")):(0,H.dy)(o||(o=(0,s.Z)(['<mwc-button class="compare ','" @click="','" dense outlined> '," </mwc-button>"])),this._compare?"active":"",this._toggleCompare,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.compare")))}},{kind:"method",key:"_handleView",value:function(e){this._period=e.detail.value;var t=(0,y.Z)(),n=!this._startDate||(0,v.Z)(t,{start:this._startDate,end:this._endDate||(0,g.Z)()})?t:this._startDate,r=(0,B.Bt)(this.hass.locale);this._setDate("day"===this._period?(0,j.A)(n,m.Z,this.hass.locale,this.hass.config):"week"===this._period?(0,j.A)(n,b.Z,this.hass.locale,this.hass.config,{weekStartsOn:r}):"month"===this._period?(0,j.A)(n,k.Z,this.hass.locale,this.hass.config):(0,j.A)(n,Z.Z,this.hass.locale,this.hass.config))}},{kind:"method",key:"_pickToday",value:function(){var e=(0,B.Bt)(this.hass.locale);this._setDate("day"===this._period?(0,j.A)(new Date,m.Z,this.hass.locale,this.hass.config):"week"===this._period?(0,j.A)(new Date,b.Z,this.hass.locale,this.hass.config,{weekStartsOn:e}):"month"===this._period?(0,j.A)(new Date,k.Z,this.hass.locale,this.hass.config):(0,j.A)(new Date,Z.Z,this.hass.locale,this.hass.config))}},{kind:"method",key:"_pickPrevious",value:function(){var e="day"===this._period?(0,w.Z)(this._startDate,-1):"week"===this._period?(0,x.Z)(this._startDate,-1):"month"===this._period?(0,D.Z)(this._startDate,-1):(0,C.Z)(this._startDate,-1);this._setDate(e)}},{kind:"method",key:"_pickNext",value:function(){var e="day"===this._period?(0,w.Z)(this._startDate,1):"week"===this._period?(0,x.Z)(this._startDate,1):"month"===this._period?(0,D.Z)(this._startDate,1):(0,C.Z)(this._startDate,1);this._setDate(e)}},{kind:"method",key:"_setDate",value:function(e){var t=(0,B.Bt)(this.hass.locale),n="day"===this._period?(0,j.A)(e,S.Z,this.hass.locale,this.hass.config):"week"===this._period?(0,j.A)(e,A.Z,this.hass.locale,this.hass.config,{weekStartsOn:t}):"month"===this._period?(0,j.A)(e,T.Z,this.hass.locale,this.hass.config):(0,j.A)(e,L.Z,this.hass.locale,this.hass.config),r=(0,z.UB)(this.hass,{key:this.collectionKey});r.setPeriod(e,n),r.refresh()}},{kind:"method",key:"_updateDates",value:function(e){this._compare=void 0!==e.startCompare,this._startDate=e.start,this._endDate=e.end||(0,g.Z)();var t=(0,P.Z)(this._endDate,this._startDate);this._period=t<1?"day":6===t?"week":t>26&&t<31?"month":364===t||365===t?"year":void 0}},{kind:"method",key:"_toggleCompare",value:function(){this._compare=!this._compare;var e=(0,z.UB)(this.hass,{key:this.collectionKey});e.setCompare(this._compare),e.refresh()}},{kind:"get",static:!0,key:"styles",value:function(){return(0,H.iv)(a||(a=(0,s.Z)(['.row{display:flex;justify-content:flex-end}:host([narrow]) .row{flex-direction:column-reverse}.label{display:flex;justify-content:flex-end;align-items:center;font-size:20px}.period{display:flex;flex-wrap:wrap;justify-content:flex-end;align-items:center}:host([narrow]) .period{margin-bottom:8px}mwc-button{margin-left:8px}ha-icon-button{margin-left:4px;--mdc-icon-size:20px}ha-icon-button.active::before,mwc-button.active::before{top:0;left:0;width:100%;height:100%;position:absolute;background-color:currentColor;opacity:0;pointer-events:none;content:"";transition:opacity 15ms linear,background-color 15ms linear;opacity:var(--mdc-icon-button-ripple-opacity,.12)}ha-icon-button.active::before{border-radius:50%}.compare{position:relative}:host{--mdc-button-outline-color:currentColor;--primary-color:currentColor;--mdc-theme-primary:currentColor;--mdc-theme-on-primary:currentColor;--mdc-button-disabled-outline-color:var(--disabled-text-color);--mdc-button-disabled-ink-color:var(--disabled-text-color);--mdc-icon-button-ripple-opacity:0.2}ha-icon-button{--mdc-icon-button-size:28px}ha-button-toggle-group{padding-left:8px;padding-inline-start:8px;direction:var(--direction)}mwc-button{flex-shrink:0}'])))}}]}}),(0,E.f)(H.oi))}}]);
//# sourceMappingURL=40003-eBqtGo-S4Ho.js.map