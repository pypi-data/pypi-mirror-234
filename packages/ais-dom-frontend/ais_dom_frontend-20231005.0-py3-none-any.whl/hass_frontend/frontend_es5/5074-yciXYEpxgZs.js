"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[5074],{5763:function(t,e,n){function i(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}n.d(e,{Z:function(){return i}})},24112:function(t,e,n){n.d(e,{Z:function(){return d}});var i=n(34327),a=n(5763),o=n(59429),r=n(23682),s=864e5;function l(t,e){var n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function d(t,e){(0,r.Z)(2,arguments);var n=(0,i.Z)(t),d=(0,i.Z)(e),u=l(n,d),h=Math.abs(function(t,e){(0,r.Z)(2,arguments);var n=(0,o.Z)(t),i=(0,o.Z)(e),l=n.getTime()-(0,a.Z)(n),d=i.getTime()-(0,a.Z)(i);return Math.round((l-d)/s)}(n,d));n.setDate(n.getDate()-u*h);var c=u*(h-Number(l(n,d)===-u));return 0===c?0:c}},35040:function(t,e,n){n.d(e,{Z:function(){return r}});var i=n(24112),a=n(23682),o=n(86102);function r(t,e,n){(0,a.Z)(2,arguments);var r=(0,i.Z)(t,e)/7;return(0,o.u)(null==n?void 0:n.roundingMethod)(r)}},80596:function(t,e,n){n.d(e,{G:function(){return u}});var i=n(14516),a=(n(10520),n(24112)),o=n(59401),r=n(35040),s=n(26410);var l={second:45,minute:45,hour:22,day:5,week:4,month:11},d=(0,i.Z)((function(t){return new Intl.RelativeTimeFormat(t.language,{numeric:"auto"})})),u=function(t,e,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},d=Object.assign(Object.assign({},l),i||{}),u=(+t-+e)/1e3;if(Math.abs(u)<d.second)return{value:Math.round(u),unit:"second"};var h=u/60;if(Math.abs(h)<d.minute)return{value:Math.round(h),unit:"minute"};var c=u/3600;if(Math.abs(c)<d.hour)return{value:Math.round(c),unit:"hour"};var v=new Date(t),g=new Date(e);v.setHours(0,0,0,0),g.setHours(0,0,0,0);var k=(0,a.Z)(v,g);if(0===k)return{value:Math.round(c),unit:"hour"};if(Math.abs(k)<d.day)return{value:k,unit:"day"};var f=(0,s.Bt)(n),p=(0,o.Z)(v,{weekStartsOn:f}),y=(0,o.Z)(g,{weekStartsOn:f}),m=(0,r.Z)(p,y);if(0===m)return{value:k,unit:"day"};if(Math.abs(m)<d.week)return{value:m,unit:"week"};var _=v.getFullYear()-g.getFullYear(),b=12*_+v.getMonth()-g.getMonth();return 0===b?{value:m,unit:"week"}:Math.abs(b)<d.month||0===_?{value:b,unit:"month"}:{value:Math.round(_),unit:"year"}}(t,n,e);return i?d(e).format(u.value,u.unit):Intl.NumberFormat(e.language,{style:"unit",unit:u.unit,unitDisplay:"long"}).format(Math.abs(u.value))}},25516:function(t,e,n){n.d(e,{i:function(){return a}});var i=(0,n(8330).P)((function(t){history.replaceState({scrollPosition:t},"")}),300),a=function(t){return function(e){return{kind:"method",placement:"prototype",key:e.key,descriptor:{set:function(t){i(t),this["__".concat(String(e.key))]=t},get:function(){var t;return this["__".concat(String(e.key))]||(null===(t=history.state)||void 0===t?void 0:t.scrollPosition)},enumerable:!0,configurable:!0},finisher:function(n){var i=n.prototype.connectedCallback;n.prototype.connectedCallback=function(){var n=this;i.call(this);var a=this[e.key];a&&this.updateComplete.then((function(){var e=n.renderRoot.querySelector(t);e&&setTimeout((function(){e.scrollTop=a}),0)}))}}}}}},21780:function(t,e,n){n.d(e,{f:function(){return i}});var i=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},42952:function(t,e,n){var i=n(33368),a=n(71650),o=n(82390),r=n(69205),s=n(70906),l=n(91808),d=n(34541),u=n(47838),h=n(68144),c=n(79932),v=n(80596),g=n(21780);(0,l.Z)([(0,c.Mo)("ha-relative-time")],(function(t,e){var n=function(e){(0,r.Z)(l,e);var n=(0,s.Z)(l);function l(){var e;(0,a.Z)(this,l);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=n.call.apply(n,[this].concat(r)),t((0,o.Z)(e)),e}return(0,i.Z)(l)}(e);return{F:n,d:[{kind:"field",decorators:[(0,c.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,c.Cb)({attribute:!1})],key:"datetime",value:void 0},{kind:"field",decorators:[(0,c.Cb)({type:Boolean})],key:"capitalize",value:function(){return!1}},{kind:"field",key:"_interval",value:void 0},{kind:"method",key:"disconnectedCallback",value:function(){(0,d.Z)((0,u.Z)(n.prototype),"disconnectedCallback",this).call(this),this._clearInterval()}},{kind:"method",key:"connectedCallback",value:function(){(0,d.Z)((0,u.Z)(n.prototype),"connectedCallback",this).call(this),this.datetime&&this._startInterval()}},{kind:"method",key:"createRenderRoot",value:function(){return this}},{kind:"method",key:"firstUpdated",value:function(t){(0,d.Z)((0,u.Z)(n.prototype),"firstUpdated",this).call(this,t),this._updateRelative()}},{kind:"method",key:"update",value:function(t){(0,d.Z)((0,u.Z)(n.prototype),"update",this).call(this,t),this._updateRelative()}},{kind:"method",key:"_clearInterval",value:function(){this._interval&&(window.clearInterval(this._interval),this._interval=void 0)}},{kind:"method",key:"_startInterval",value:function(){var t=this;this._clearInterval(),this._interval=window.setInterval((function(){return t._updateRelative()}),6e4)}},{kind:"method",key:"_updateRelative",value:function(){if(this.datetime){var t=(0,v.G)(new Date(this.datetime),this.hass.locale);this.innerHTML=this.capitalize?(0,g.f)(t):t}else this.innerHTML=this.hass.localize("ui.components.relative_time.never")}}]}}),h.fl)},18873:function(t,e,n){n.r(e),n.d(e,{HaPanelLogbook:function(){return M}});var i,a,o,r,s=n(68990),l=n(88962),d=n(33368),u=n(71650),h=n(82390),c=n(69205),v=n(70906),g=n(91808),k=n(34541),f=n(47838),p=n(68144),y=n(79932),m=n(83849),_=n(69934),b=n(15493),w=(n(74535),n(29272),n(10983),n(2315),n(48932),n(36226),n(57266)),Z=n(11654),M=(n(97740),(0,g.Z)([(0,y.Mo)("ha-panel-logbook")],(function(t,e){var n=function(e){(0,c.Z)(i,e);var n=(0,v.Z)(i);function i(){var e;(0,u.Z)(this,i),e=n.call(this),t((0,h.Z)(e));var a=new Date;a.setHours(a.getHours()-1,0,0,0);var o=new Date;return o.setHours(o.getHours()+2,0,0,0),e._time={range:[a,o]},e}return(0,d.Z)(i)}(e);return{F:n,d:[{kind:"field",decorators:[(0,y.Cb)()],key:"hass",value:void 0},{kind:"field",decorators:[(0,y.Cb)({reflect:!0,type:Boolean})],key:"narrow",value:void 0},{kind:"field",decorators:[(0,y.SB)()],key:"_time",value:void 0},{kind:"field",decorators:[(0,y.SB)()],key:"_entityIds",value:void 0},{kind:"field",decorators:[(0,y.SB)()],key:"_showBack",value:void 0},{kind:"method",key:"_goBack",value:function(){history.back()}},{kind:"method",key:"render",value:function(){return(0,p.dy)(i||(i=(0,l.Z)([" <ha-top-app-bar-fixed> ",' <div slot="title">','</div> <ha-icon-button slot="actionItems" @click="','" .path="','" .label="','"></ha-icon-button> <div class="filters"> <ha-date-range-picker .hass="','" .startDate="','" .endDate="','" @change="','"></ha-date-range-picker> <ha-entity-picker .hass="','" .value="','" .label="','" .entityFilter="','" @change="','"></ha-entity-picker> </div> <ha-logbook .hass="','" .time="','" .entityIds="','" virtualize></ha-logbook> </ha-top-app-bar-fixed> '])),this._showBack?(0,p.dy)(a||(a=(0,l.Z)([' <ha-icon-button-arrow-prev slot="navigationIcon" @click="','"></ha-icon-button-arrow-prev> '])),this._goBack):(0,p.dy)(o||(o=(0,l.Z)([' <ha-menu-button slot="navigationIcon" .hass="','" .narrow="','"></ha-menu-button> '])),this.hass,this.narrow),this.hass.localize("panel.logbook"),this._refreshLogbook,"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z",this.hass.localize("ui.common.refresh"),this.hass,this._time.range[0],this._time.range[1],this._dateRangeChanged,this.hass,this._entityIds?this._entityIds[0]:void 0,this.hass.localize("ui.components.entity.entity-picker.entity"),w.MY,this._entityPicked,this.hass,this._time,this._entityIds)}},{kind:"method",key:"willUpdate",value:function(t){(0,k.Z)((0,f.Z)(n.prototype),"willUpdate",this).call(this,t),this.hasUpdated||this._applyURLParams()}},{kind:"method",key:"firstUpdated",value:function(t){(0,k.Z)((0,f.Z)(n.prototype),"firstUpdated",this).call(this,t),this.hass.loadBackendTranslation("title"),"1"===(0,b.Q2)().back&&history.length>1&&(this._showBack=!0,(0,m.c)((0,_.q)((0,b.pc)("back")),{replace:!0}))}},{kind:"method",key:"connectedCallback",value:function(){(0,k.Z)((0,f.Z)(n.prototype),"connectedCallback",this).call(this),window.addEventListener("location-changed",this._locationChanged)}},{kind:"method",key:"disconnectedCallback",value:function(){(0,k.Z)((0,f.Z)(n.prototype),"disconnectedCallback",this).call(this),window.removeEventListener("location-changed",this._locationChanged)}},{kind:"field",key:"_locationChanged",value:function(){var t=this;return function(){t._applyURLParams()}}},{kind:"method",key:"_applyURLParams",value:function(){var t=new URLSearchParams(location.search);if(t.has("entity_id")){var e=t.get("entity_id");if(e){var n=e.split(",").sort();this._entityIds&&n.length===this._entityIds.length&&this._entityIds.every((function(t,e){return t===n[e]}))||(this._entityIds=n)}else this._entityIds=void 0}else this._entityIds=void 0;var i=t.get("start_date"),a=t.get("end_date");if(i||a){var o=i?new Date(i):this._time.range[0],r=a?new Date(a):this._time.range[1];o.getTime()===this._time.range[0].getTime()&&r.getTime()===this._time.range[1].getTime()||(this._time={range:[i?new Date(i):this._time.range[0],a?new Date(a):this._time.range[1]]})}}},{kind:"method",key:"_dateRangeChanged",value:function(t){var e=t.detail.startDate,n=t.detail.endDate;0===n.getHours()&&0===n.getMinutes()&&(n.setDate(n.getDate()+1),n.setMilliseconds(n.getMilliseconds()-1)),this._updatePath({start_date:e.toISOString(),end_date:n.toISOString()})}},{kind:"method",key:"_entityPicked",value:function(t){this._updatePath({entity_id:t.target.value||void 0})}},{kind:"method",key:"_updatePath",value:function(t){for(var e=(0,b.Q2)(),n=0,i=Object.entries(t);n<i.length;n++){var a=(0,s.Z)(i[n],2),o=a[0],r=a[1];void 0===r?delete e[o]:e[o]=r}(0,m.c)("/logbook?".concat((0,b.ou)(e)),{replace:!0})}},{kind:"method",key:"_refreshLogbook",value:function(){var t;null===(t=this.shadowRoot.querySelector("ha-logbook"))||void 0===t||t.refresh()}},{kind:"get",static:!0,key:"styles",value:function(){return[Z.Qx,(0,p.iv)(r||(r=(0,l.Z)(["ha-logbook{height:calc(100vh - 136px)}:host([narrow]) ha-logbook{height:calc(100vh - 198px)}ha-date-range-picker{margin-right:16px;margin-inline-end:16px;margin-inline-start:initial;max-width:100%;direction:var(--direction);margin-bottom:-5px}:host([narrow]) ha-date-range-picker{margin-right:0;margin-inline-end:0;margin-inline-start:initial;direction:var(--direction);margin-bottom:8px}.filters{display:flex;align-items:flex-end;padding:8px 16px 0}:host([narrow]) .filters{flex-wrap:wrap}ha-entity-picker{display:inline-block;flex-grow:1;max-width:400px}:host([narrow]) ha-entity-picker{max-width:none;width:100%}"])))]}}]}}),p.oi))}}]);
//# sourceMappingURL=5074-yciXYEpxgZs.js.map