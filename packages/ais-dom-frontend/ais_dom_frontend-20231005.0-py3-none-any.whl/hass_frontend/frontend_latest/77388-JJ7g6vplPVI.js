export const id=77388;export const ids=[77388];export const modules={5435:(t,e,i)=>{i.a(t,(async(t,a)=>{try{i.d(e,{G:()=>d});var n=i(14516),o=i(4631),s=i(96191),r=t([o,s]);[o,s]=r.then?(await r)():r;const l=(0,n.Z)((t=>new Intl.RelativeTimeFormat(t.language,{numeric:"auto"}))),d=(t,e,i,a=!0)=>{const n=(0,s.W)(t,i,e);return a?l(e).format(n.value,n.unit):Intl.NumberFormat(e.language,{style:"unit",unit:n.unit,unitDisplay:"long"}).format(Math.abs(n.value))};a()}catch(t){a(t)}}))},25516:(t,e,i)=>{i.d(e,{i:()=>n});const a=(0,i(8330).P)((t=>{history.replaceState({scrollPosition:t},"")}),300),n=t=>e=>({kind:"method",placement:"prototype",key:e.key,descriptor:{set(t){a(t),this[`__${String(e.key)}`]=t},get(){var t;return this[`__${String(e.key)}`]||(null===(t=history.state)||void 0===t?void 0:t.scrollPosition)},enumerable:!0,configurable:!0},finisher(i){const a=i.prototype.connectedCallback;i.prototype.connectedCallback=function(){a.call(this);const i=this[e.key];i&&this.updateComplete.then((()=>{const e=this.renderRoot.querySelector(t);e&&setTimeout((()=>{e.scrollTop=i}),0)}))}}})},21780:(t,e,i)=>{i.d(e,{f:()=>a});const a=t=>t.charAt(0).toUpperCase()+t.slice(1)},96191:(t,e,i)=>{i.a(t,(async(t,a)=>{try{i.d(e,{W:()=>d});var n=i(24112),o=i(59401),s=i(35040),r=i(26410),l=t([r]);r=(l.then?(await l)():l)[0];const h=1e3,c=60,u=60*c;function d(t,e=Date.now(),i,a={}){const l={...k,...a||{}},d=(+t-+e)/h;if(Math.abs(d)<l.second)return{value:Math.round(d),unit:"second"};const v=d/c;if(Math.abs(v)<l.minute)return{value:Math.round(v),unit:"minute"};const y=d/u;if(Math.abs(y)<l.hour)return{value:Math.round(y),unit:"hour"};const p=new Date(t),g=new Date(e);p.setHours(0,0,0,0),g.setHours(0,0,0,0);const m=(0,n.Z)(p,g);if(0===m)return{value:Math.round(y),unit:"hour"};if(Math.abs(m)<l.day)return{value:m,unit:"day"};const f=(0,r.Bt)(i),_=(0,o.Z)(p,{weekStartsOn:f}),b=(0,o.Z)(g,{weekStartsOn:f}),w=(0,s.Z)(_,b);if(0===w)return{value:m,unit:"day"};if(Math.abs(w)<l.week)return{value:w,unit:"week"};const C=p.getFullYear()-g.getFullYear(),I=12*C+p.getMonth()-g.getMonth();return 0===I?{value:w,unit:"week"}:Math.abs(I)<l.month||0===C?{value:I,unit:"month"}:{value:Math.round(C),unit:"year"}}const k={second:45,minute:45,hour:22,day:5,week:4,month:11};a()}catch(v){a(v)}}))},42952:(t,e,i)=>{i.a(t,(async(t,e)=>{try{var a=i(17463),n=i(34541),o=i(47838),s=i(68144),r=i(79932),l=i(5435),d=i(21780),h=t([l]);l=(h.then?(await h)():h)[0];(0,a.Z)([(0,r.Mo)("ha-relative-time")],(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"datetime",value:void 0},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"capitalize",value:()=>!1},{kind:"field",key:"_interval",value:void 0},{kind:"method",key:"disconnectedCallback",value:function(){(0,n.Z)((0,o.Z)(i.prototype),"disconnectedCallback",this).call(this),this._clearInterval()}},{kind:"method",key:"connectedCallback",value:function(){(0,n.Z)((0,o.Z)(i.prototype),"connectedCallback",this).call(this),this.datetime&&this._startInterval()}},{kind:"method",key:"createRenderRoot",value:function(){return this}},{kind:"method",key:"firstUpdated",value:function(t){(0,n.Z)((0,o.Z)(i.prototype),"firstUpdated",this).call(this,t),this._updateRelative()}},{kind:"method",key:"update",value:function(t){(0,n.Z)((0,o.Z)(i.prototype),"update",this).call(this,t),this._updateRelative()}},{kind:"method",key:"_clearInterval",value:function(){this._interval&&(window.clearInterval(this._interval),this._interval=void 0)}},{kind:"method",key:"_startInterval",value:function(){this._clearInterval(),this._interval=window.setInterval((()=>this._updateRelative()),6e4)}},{kind:"method",key:"_updateRelative",value:function(){if(this.datetime){const t=(0,l.G)(new Date(this.datetime),this.hass.locale);this.innerHTML=this.capitalize?(0,d.f)(t):t}else this.innerHTML=this.hass.localize("ui.components.relative_time.never")}}]}}),s.fl);e()}catch(t){e(t)}}))},18873:(t,e,i)=>{i.a(t,(async(t,a)=>{try{i.r(e),i.d(e,{HaPanelLogbook:()=>m});var n=i(17463),o=i(34541),s=i(47838),r=i(68144),l=i(79932),d=i(83849),h=i(69934),c=i(15493),u=(i(74535),i(39143)),k=(i(10983),i(2315),i(48932),i(36226),i(57266)),v=i(11654),y=i(97740),p=t([u,y]);[u,y]=p.then?(await p)():p;const g="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z";let m=(0,n.Z)([(0,l.Mo)("ha-panel-logbook")],(function(t,e){class i extends e{constructor(){super(),t(this);const e=new Date;e.setHours(e.getHours()-1,0,0,0);const i=new Date;i.setHours(i.getHours()+2,0,0,0),this._time={range:[e,i]}}}return{F:i,d:[{kind:"field",decorators:[(0,l.Cb)()],key:"hass",value:void 0},{kind:"field",decorators:[(0,l.Cb)({reflect:!0,type:Boolean})],key:"narrow",value:void 0},{kind:"field",decorators:[(0,l.SB)()],key:"_time",value:void 0},{kind:"field",decorators:[(0,l.SB)()],key:"_entityIds",value:void 0},{kind:"field",decorators:[(0,l.SB)()],key:"_showBack",value:void 0},{kind:"method",key:"_goBack",value:function(){history.back()}},{kind:"method",key:"render",value:function(){return r.dy` <ha-top-app-bar-fixed> ${this._showBack?r.dy` <ha-icon-button-arrow-prev slot="navigationIcon" @click="${this._goBack}"></ha-icon-button-arrow-prev> `:r.dy` <ha-menu-button slot="navigationIcon" .hass="${this.hass}" .narrow="${this.narrow}"></ha-menu-button> `} <div slot="title">${this.hass.localize("panel.logbook")}</div> <ha-icon-button slot="actionItems" @click="${this._refreshLogbook}" .path="${g}" .label="${this.hass.localize("ui.common.refresh")}"></ha-icon-button> <div class="filters"> <ha-date-range-picker .hass="${this.hass}" .startDate="${this._time.range[0]}" .endDate="${this._time.range[1]}" @change="${this._dateRangeChanged}"></ha-date-range-picker> <ha-entity-picker .hass="${this.hass}" .value="${this._entityIds?this._entityIds[0]:void 0}" .label="${this.hass.localize("ui.components.entity.entity-picker.entity")}" .entityFilter="${k.MY}" @change="${this._entityPicked}"></ha-entity-picker> </div> <ha-logbook .hass="${this.hass}" .time="${this._time}" .entityIds="${this._entityIds}" virtualize></ha-logbook> </ha-top-app-bar-fixed> `}},{kind:"method",key:"willUpdate",value:function(t){(0,o.Z)((0,s.Z)(i.prototype),"willUpdate",this).call(this,t),this.hasUpdated||this._applyURLParams()}},{kind:"method",key:"firstUpdated",value:function(t){(0,o.Z)((0,s.Z)(i.prototype),"firstUpdated",this).call(this,t),this.hass.loadBackendTranslation("title");"1"===(0,c.Q2)().back&&history.length>1&&(this._showBack=!0,(0,d.c)((0,h.q)((0,c.pc)("back")),{replace:!0}))}},{kind:"method",key:"connectedCallback",value:function(){(0,o.Z)((0,s.Z)(i.prototype),"connectedCallback",this).call(this),window.addEventListener("location-changed",this._locationChanged)}},{kind:"method",key:"disconnectedCallback",value:function(){(0,o.Z)((0,s.Z)(i.prototype),"disconnectedCallback",this).call(this),window.removeEventListener("location-changed",this._locationChanged)}},{kind:"field",key:"_locationChanged",value(){return()=>{this._applyURLParams()}}},{kind:"method",key:"_applyURLParams",value:function(){const t=new URLSearchParams(location.search);if(t.has("entity_id")){const e=t.get("entity_id");if(e){const t=e.split(",").sort();this._entityIds&&t.length===this._entityIds.length&&this._entityIds.every(((e,i)=>e===t[i]))||(this._entityIds=t)}else this._entityIds=void 0}else this._entityIds=void 0;const e=t.get("start_date"),i=t.get("end_date");if(e||i){const t=e?new Date(e):this._time.range[0],a=i?new Date(i):this._time.range[1];t.getTime()===this._time.range[0].getTime()&&a.getTime()===this._time.range[1].getTime()||(this._time={range:[e?new Date(e):this._time.range[0],i?new Date(i):this._time.range[1]]})}}},{kind:"method",key:"_dateRangeChanged",value:function(t){const e=t.detail.startDate,i=t.detail.endDate;0===i.getHours()&&0===i.getMinutes()&&(i.setDate(i.getDate()+1),i.setMilliseconds(i.getMilliseconds()-1)),this._updatePath({start_date:e.toISOString(),end_date:i.toISOString()})}},{kind:"method",key:"_entityPicked",value:function(t){this._updatePath({entity_id:t.target.value||void 0})}},{kind:"method",key:"_updatePath",value:function(t){const e=(0,c.Q2)();for(const[i,a]of Object.entries(t))void 0===a?delete e[i]:e[i]=a;(0,d.c)(`/logbook?${(0,c.ou)(e)}`,{replace:!0})}},{kind:"method",key:"_refreshLogbook",value:function(){var t;null===(t=this.shadowRoot.querySelector("ha-logbook"))||void 0===t||t.refresh()}},{kind:"get",static:!0,key:"styles",value:function(){return[v.Qx,r.iv`ha-logbook{height:calc(100vh - 136px)}:host([narrow]) ha-logbook{height:calc(100vh - 198px)}ha-date-range-picker{margin-right:16px;margin-inline-end:16px;margin-inline-start:initial;max-width:100%;direction:var(--direction);margin-bottom:-5px}:host([narrow]) ha-date-range-picker{margin-right:0;margin-inline-end:0;margin-inline-start:initial;direction:var(--direction);margin-bottom:8px}.filters{display:flex;align-items:flex-end;padding:8px 16px 0}:host([narrow]) .filters{flex-wrap:wrap}ha-entity-picker{display:inline-block;flex-grow:1;max-width:400px}:host([narrow]) ha-entity-picker{max-width:none;width:100%}`]}}]}}),r.oi);a()}catch(t){a(t)}}))},46134:(t,e,i)=>{i.d(e,{o:()=>n});var a=i(44281);const n=async()=>{await(0,a.j)(),await i.e(68984).then(i.bind(i,68984))}}};
//# sourceMappingURL=77388-JJ7g6vplPVI.js.map