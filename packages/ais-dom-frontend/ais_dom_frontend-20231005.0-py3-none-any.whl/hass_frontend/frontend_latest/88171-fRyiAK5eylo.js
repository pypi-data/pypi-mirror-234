export const id=88171;export const ids=[88171];export const modules={39258:(t,e,i)=>{i.d(e,{U:()=>_});var s=i(55070),n=i(15838),o=i(89525),r=i(58831),a=i(6229),h=i(56007),d=i(22134);const u={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};let c=0;const l=new Map;function _(t,e,i){return function(t,e,i){var s;if(!i||t===h.nZ)return(0,d.g)("--history-unavailable-color",e);if(t===h.lz)return(0,d.g)("--history-unknown-color",e);const c=(0,a.tD)(i,t);if(!c)return;const l=(0,d.g)(c,e);if(!l)return;const _=(0,r.M)(i.entity_id),y=null===(s=u[_])||void 0===s?void 0:s[t];return y?(0,n.uO)((0,o.C)((0,n.Rw)((0,n.wK)(l)),y)):l}(t,e,i)||function(t,e){if(l.has(t))return l.get(t);const i=(0,s.hZ)(c,e);return c++,l.set(t,i),i}(t,e)}},38026:(t,e,i)=>{i.a(t,(async(t,s)=>{try{i.r(e),i.d(e,{DEFAULT_HOURS_TO_SHOW:()=>f,HuiHistoryGraphCard:()=>k});var n=i(17463),o=i(34541),r=i(47838),a=i(68144),h=i(79932),d=i(83448),u=i(7323),c=i(77243),l=(i(22098),i(9381),i(58763)),_=i(53658),y=i(90271),v=t([c,l]);[c,l]=v.then?(await v)():v;const f=24;let k=(0,n.Z)([(0,h.Mo)("hui-history-graph-card")],(function(t,e){class s extends e{constructor(...e){super(...e),t(this)}}return{F:s,d:[{kind:"method",static:!0,key:"getConfigElement",value:async function(){return await Promise.all([i.e(42850),i.e(97487),i.e(68331),i.e(40163),i.e(74535),i.e(24905)]).then(i.bind(i,52524)),document.createElement("hui-history-graph-card-editor")}},{kind:"method",static:!0,key:"getStubConfig",value:function(){return{type:"history-graph",entities:["sun.sun"]}}},{kind:"field",decorators:[(0,h.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,h.SB)()],key:"_stateHistory",value:void 0},{kind:"field",decorators:[(0,h.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,h.SB)()],key:"_error",value:void 0},{kind:"field",key:"_names",value:()=>({})},{kind:"field",key:"_entityIds",value:()=>[]},{kind:"field",key:"_hoursToShow",value:()=>f},{kind:"field",key:"_interval",value:void 0},{kind:"field",key:"_subscribed",value:void 0},{kind:"method",key:"getCardSize",value:function(){var t,e;return null!==(t=this._config)&&void 0!==t&&t.title?2:0+2*((null===(e=this._entityIds)||void 0===e?void 0:e.length)||1)}},{kind:"method",key:"setConfig",value:function(t){if(!t.entities||!Array.isArray(t.entities))throw new Error("Entities need to be an array");if(!t.entities.length)throw new Error("You must include at least one entity");const e=t.entities?(0,y.A)(t.entities):[];this._entityIds=[],e.forEach((t=>{this._entityIds.push(t.entity),t.name&&(this._names[t.entity]=t.name)})),this._hoursToShow=t.hours_to_show||f,this._config=t}},{kind:"method",key:"connectedCallback",value:function(){(0,o.Z)((0,r.Z)(s.prototype),"connectedCallback",this).call(this),this.hasUpdated&&this._subscribeHistory()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,o.Z)((0,r.Z)(s.prototype),"disconnectedCallback",this).call(this),this._unsubscribeHistory()}},{kind:"method",key:"_subscribeHistory",value:function(){(0,u.p)(this.hass,"history")&&!this._subscribed&&(this._subscribed=(0,l.xS)(this.hass,(t=>{this._subscribed&&(this._stateHistory=(0,l.Nu)(this.hass,t,this.hass.localize))}),this._hoursToShow,this._entityIds).catch((t=>{this._subscribed=void 0,this._error=t})),this._setRedrawTimer())}},{kind:"method",key:"_redrawGraph",value:function(){this._stateHistory&&(this._stateHistory={...this._stateHistory})}},{kind:"method",key:"_setRedrawTimer",value:function(){clearInterval(this._interval),this._interval=window.setInterval((()=>this._redrawGraph()),6e4)}},{kind:"method",key:"_unsubscribeHistory",value:function(){clearInterval(this._interval),this._subscribed&&(this._subscribed.then((t=>null==t?void 0:t())),this._subscribed=void 0)}},{kind:"method",key:"shouldUpdate",value:function(t){return!!t.has("_stateHistory")||(0,_.Wh)(this,t)}},{kind:"method",key:"updated",value:function(t){if((0,o.Z)((0,r.Z)(s.prototype),"updated",this).call(this,t),!(this._config&&this.hass&&this._hoursToShow&&this._entityIds.length))return;if(!t.has("_config")&&!t.has("hass"))return;const e=t.get("_config");!t.has("_config")||(null==e?void 0:e.entities)===this._config.entities&&(null==e?void 0:e.hours_to_show)===this._config.hours_to_show||(this._unsubscribeHistory(),this._subscribeHistory())}},{kind:"method",key:"render",value:function(){return this.hass&&this._config?a.dy` <ha-card .header="${this._config.title}"> <div class="content ${(0,d.$)({"has-header":!!this._config.title})}"> ${this._error?a.dy` <ha-alert alert-type="error"> ${this.hass.localize("ui.components.history_charts.error")}: ${this._error.message||this._error.code} </ha-alert> `:a.dy` <state-history-charts .hass="${this.hass}" .isLoadingData="${!this._stateHistory}" .historyData="${this._stateHistory}" .names="${this._names}" up-to-now .hoursToShow="${this._hoursToShow}" .showNames="${void 0===this._config.show_names||this._config.show_names}"></state-history-charts> `} </div> </ha-card> `:a.Ld}},{kind:"get",static:!0,key:"styles",value:function(){return a.iv`ha-card{height:100%}.content{padding:16px}.has-header{padding-top:0}`}}]}}),a.oi);s()}catch(t){s(t)}}))}};
//# sourceMappingURL=88171-fRyiAK5eylo.js.map