(self.webpackChunkGiN=self.webpackChunkGiN||[]).push([[755],{9755:(e,t,i)=>{e.exports=i(4339),e.exports.version=i(8908).version},4339:(e,t,i)=>{const s=i(1337),n=i(6072),l=i(8908),o=s.DOMWidgetModel.extend({defaults:n.extend(s.DOMWidgetModel.prototype.defaults(),{_model_name:"UploadModel",_model_module:l.name,_model_module_version:l.version,_view_name:"UploadView",_view_module:l.name,_view_module_version:l.version,accept:"",description:"Upload",disabled:!1,icon:"upload",button_style:"",multiple:!1,value:[],error:"",style:null,busy:!1})}),a=s.DOMWidgetView.extend({tagName:"button",class_map:{primary:["mod-primary"],success:["mod-success"],info:["mod-info"],warning:["mod-warning"],danger:["mod-danger"]},_icon:null,_description:null,_chunks_total:0,_chunks_complete:0,render:function(){this.el.classList.add("jupyter-widgets","widget-upload","jupyter-button"),this.fileInput=document.createElement("input"),this.fileInput.type="file",this.fileInput.style.display="none",this.el.addEventListener("click",(()=>this.fileInput.click())),this.fileInput.addEventListener("click",(()=>this.fileInput.value="")),this.fileInput.addEventListener("change",(()=>this.upload_files())),this.listenTo(this.model,"change:button_style",this.update_button_style),this.set_button_style(),this.update()},update_upload_label:function(e,t){if(e&&(this._icon=this.model.get("icon"),this._description=this.model.get("description"),this.model.set("icon","")),t)this.model.set("icon",this._icon),this.model.set("description",this._description);else{const e=Math.floor(this._chunks_complete*(100/this._chunks_total));this.model.set("description",`${e}%`)}this.model.save()},encode_chunk:function(e){return new Promise(((t,i)=>{const s=new FileReader;s.onloadend=()=>t(s.result.split(",")[1]),s.readAsDataURL(e)}))},chunk_file:async function(e){const t=1048576,i=Math.ceil(e.size/t),s=[],n=[];let l=0;for(;l<i;){let i=l*t,s=e.slice(i,i+t);n.push(s),l++}l=0;for(const t of n){const n=await this.encode_chunk(t),o=async()=>(this.send({event:"upload",file:e.name,count:l+1,total:i,chunk:n}),l++,this._chunks_complete++,this.update_upload_label(!1,!1),{chunk:this._chunks_complete,total:this._chunks_total});s.push(o)}return s},upload_files:async function(){this.model.set("busy",!0),this.model.save(),this._chunks_total=0,this._chunks_complete=0;const e=Array.from(this.fileInput.files??[]);e.forEach((e=>this._chunks_total+=Math.ceil(e.size/1048576))),this.update_upload_label(!0,!1);const t=[];e.forEach((e=>{t.push((async()=>{const t=await this.chunk_file(e);for(const e of t)await e();return this.send({event:"file_complete",name:e.name}),{name:e.name,type:e.type,size:e.size,last_modified:e.lastModified}}))}));const i=[];for(const e of t)i.push(await e());this.model.set("busy",!1),this.model.set({value:i,error:""}),this.update_upload_label(!1,!0),this.send({event:"all_files_complete",names:i})},update:function(){this.el.disabled=this.model.get("disabled"),this.el.setAttribute("title",this.model.get("tooltip")),this.fileInput.accept=this.model.get("accept"),this.fileInput.multiple=this.model.get("multiple");const e=this.model.get("description"),t=this.model.get("icon");if(e.length||t.length){if(this.el.textContent="",t.length){const i=document.createElement("i");i.classList.add("fa","fa-"+t),0===e.length&&i.classList.add("center"),this.el.appendChild(i)}this.el.appendChild(document.createTextNode(e))}},update_button_style:function(){this.update_mapped_classes(this.class_map,"button_style",this.el)},set_button_style:function(){this.set_mapped_classes(this.class_map,"button_style",this.el)}});e.exports={UploadModel:o,UploadView:a}},8908:e=>{"use strict";e.exports=JSON.parse('{"name":"@g2nb/ipyuploads","version":"0.1.0","description":"A Jupyter file widget with chunked upload capabilities","author":{"name":"Thorin Tabor","email":"tmtabor@cloud.ucsd.edu"},"license":"BSD-3-Clause","main":"lib/index.js","homepage":"https://github.com/g2nb/ipyuploads","repository":{"type":"git","url":"https://github.com/g2nb/ipyuploads.git"},"bugs":{"url":"https://github.com/g2nb/ipyuploads/issues"},"keywords":["jupyter","widgets","ipython","ipywidgets","jupyterlab-extension"],"files":["lib/**/*.js","dist/*.js"],"scripts":{"clean":"rimraf dist/ && rimraf ../ipyuploads/labextension/ && rimraf ../ipyuploads/nbextension","prepublish":"yarn run clean && yarn run build:prod","build":"webpack --mode=development && yarn run build:labextension:dev","build:prod":"webpack --mode=production && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","watch":"webpack --watch --mode=development","test":"echo \\"Error: no test specified\\" && exit 1"},"devDependencies":{"@jupyterlab/builder":"^3.0.0","webpack":"^5","rimraf":"^2.6.1"},"dependencies":{"@jupyter-widgets/base":"^1.1 || ^2 || ^3 || ^4","lodash":"^4.17.4"},"jupyterlab":{"extension":"lib/labplugin","outputDir":"../ipyuploads/labextension","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')}}]);