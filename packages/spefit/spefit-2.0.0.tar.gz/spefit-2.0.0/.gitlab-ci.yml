image: python:3.9-bullseye

tests:
  stage: test
  script:
    - make develop
    - pytest -vvvv

coverage:
  stage: test
  script:
    - make develop
    - pip install codecov pytest-cov
    - export NUMBA_DISABLE_JIT=1
    - pytest --cov=./ --cov-report=xml --cov-report=term
  artifacts:
    reports:
      coverage_report:
        coverage_format: cobertura
        path: coverage.xml
