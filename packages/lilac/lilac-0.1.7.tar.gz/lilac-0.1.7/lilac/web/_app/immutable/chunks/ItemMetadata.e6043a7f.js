import{S as ne,i as ae,s as ie,k as L,a as U,q as re,e as N,l as D,m as R,h as k,c as j,r as se,n as F,G as b,p as B,b as $,a0 as P,H as he,v as H,d as w,f as K,g as v,u as oe,W as _e,X as me,a2 as ge,a3 as X,y as O,z as T,A as Y,B as q,a4 as pe,O as be}from"./index.bbac10d2.js";import{a6 as ve,ay as ke,aj as I,_ as we,at as Se,aG as Ee,aL as ye,a0 as Ve,aB as $e,aH as Ie,bv as Pe,aN as Fe,bw as Ne,bx as Ae,ab as Le}from"./Commands.6ebed012.js";import{s as J,C as De,a as Re}from"./notificationsStore.8de3746c.js";function Q(r,e,l){const t=r.slice();return t[2]=e[l],t}function Ce(r){let e,l;return e=new De({}),{c(){O(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){Y(e,t,n),l=!0},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Me(r){let e,l;return e=new Re({}),{c(){O(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){Y(e,t,n),l=!0},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Z(r){var o;let e,l=(r[0].formattedValue||((o=r[0].children)!=null&&o.length?"":"n/a"))+"",t,n;return{c(){e=L("div"),t=re(l),this.h()},l(a){e=D(a,"DIV",{title:!0,class:!0});var s=R(e);t=se(s,l),s.forEach(k),this.h()},h(){var a,s;F(e,"title",n=(a=r[0].value)==null?void 0:a.toString()),F(e,"class","truncated text-right svelte-1woyz4e"),b(e,"italic",!r[0].formattedValue&&!((s=r[0].children)!=null&&s.length))},m(a,s){$(a,e,s),P(e,t)},p(a,s){var i,c,d;s&1&&l!==(l=(a[0].formattedValue||((i=a[0].children)!=null&&i.length?"":"n/a"))+"")&&oe(t,l),s&1&&n!==(n=(c=a[0].value)==null?void 0:c.toString())&&F(e,"title",n),s&1&&b(e,"italic",!a[0].formattedValue&&!((d=a[0].children)!=null&&d.length))},d(a){a&&k(e)}}}function x(r){let e,l=[],t=new Map,n,o,a=r[0].children;const s=i=>ve(i[2].path);for(let i=0;i<a.length;i+=1){let c=Q(r,a,i),d=s(c);t.set(d,l[i]=ee(d,c))}return{c(){e=L("div");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){e=D(i,"DIV",{});var c=R(e);for(let d=0;d<l.length;d+=1)l[d].l(c);c.forEach(k),this.h()},h(){b(e,"bg-blue-100",r[0].isSignal),b(e,"bg-emerald-100",r[0].isPreviewSignal)},m(i,c){$(i,e,c);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(e,null);o=!0},p(i,c){c&1&&(a=i[0].children,H(),l=_e(l,c,s,1,i,a,t,e,me,ee,null,Q),K()),(!o||c&1)&&b(e,"bg-blue-100",i[0].isSignal),(!o||c&1)&&b(e,"bg-emerald-100",i[0].isPreviewSignal)},i(i){if(!o){for(let c=0;c<a.length;c+=1)v(l[c]);i&&ge(()=>{o&&(n||(n=X(e,J,{},!0)),n.run(1))}),o=!0}},o(i){for(let c=0;c<l.length;c+=1)w(l[c]);i&&(n||(n=X(e,J,{},!1)),n.run(0)),o=!1},d(i){i&&k(e);for(let c=0;c<l.length;c+=1)l[c].d();i&&n&&n.end()}}}function ee(r,e){let l,t,n;return t=new ce({props:{node:e[2]}}),{key:r,first:null,c(){l=N(),O(t.$$.fragment),this.h()},l(o){l=N(),T(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,a){$(o,l,a),Y(t,o,a),n=!0},p(o,a){e=o;const s={};a&1&&(s.node=e[2]),t.$set(s)},i(o){n||(v(t.$$.fragment,o),n=!0)},o(o){w(t.$$.fragment,o),n=!1},d(o){o&&k(l),q(t,o)}}}function ze(r){var M;let e,l,t,n,o,a,s=r[0].fieldName+"",i,c,d,g,m,E,V;const A=[Me,Ce],S=[];function C(f,u){return f[0].expanded?0:1}t=C(r),n=S[t]=A[t](r);let _=(r[0].formattedValue||!((M=r[0].children)!=null&&M.length))&&Z(r),h=r[0].children&&r[0].expanded&&x(r);return{c(){e=L("div"),l=L("button"),n.c(),o=U(),a=L("div"),i=re(s),c=U(),_&&_.c(),d=U(),h&&h.c(),g=N(),this.h()},l(f){e=D(f,"DIV",{class:!0});var u=R(e);l=D(u,"BUTTON",{class:!0});var p=R(l);n.l(p),p.forEach(k),o=j(u),a=D(u,"DIV",{class:!0});var y=R(a);i=se(y,s),y.forEach(k),c=j(u),_&&_.l(u),u.forEach(k),d=j(f),h&&h.l(f),g=N(),this.h()},h(){var f;F(l,"class","p-1"),b(l,"invisible",!((f=r[0].children)!=null&&f.length)),F(a,"class","truncated font-mono font-medium text-neutral-500 svelte-1woyz4e"),B(a,"min-width","10ch"),F(e,"class","flex items-center gap-x-1 pr-2 text-xs"),b(e,"bg-blue-100",r[0].isSignal),b(e,"bg-emerald-100",r[0].isPreviewSignal),b(e,"bg-teal-100",r[0].isLabel),B(e,"padding-left",.25+(r[0].path.length-1)*.5+"rem"),B(e,"line-height","1.7rem")},m(f,u){$(f,e,u),P(e,l),S[t].m(l,null),P(e,o),P(e,a),P(a,i),P(e,c),_&&_.m(e,null),$(f,d,u),h&&h.m(f,u),$(f,g,u),m=!0,E||(V=he(l,"click",r[1]),E=!0)},p(f,[u]){var y,z;let p=t;t=C(f),t!==p&&(H(),w(S[p],1,1,()=>{S[p]=null}),K(),n=S[t],n||(n=S[t]=A[t](f),n.c()),v(n,1),n.m(l,null)),(!m||u&1)&&b(l,"invisible",!((y=f[0].children)!=null&&y.length)),(!m||u&1)&&s!==(s=f[0].fieldName+"")&&oe(i,s),f[0].formattedValue||!((z=f[0].children)!=null&&z.length)?_?_.p(f,u):(_=Z(f),_.c(),_.m(e,null)):_&&(_.d(1),_=null),(!m||u&1)&&b(e,"bg-blue-100",f[0].isSignal),(!m||u&1)&&b(e,"bg-emerald-100",f[0].isPreviewSignal),(!m||u&1)&&b(e,"bg-teal-100",f[0].isLabel),u&1&&B(e,"padding-left",.25+(f[0].path.length-1)*.5+"rem"),f[0].children&&f[0].expanded?h?(h.p(f,u),u&1&&v(h,1)):(h=x(f),h.c(),v(h,1),h.m(g.parentNode,g)):h&&(H(),w(h,1,1,()=>{h=null}),K())},i(f){m||(v(n),v(h),m=!0)},o(f){w(n),w(h),m=!1},d(f){f&&k(e),S[t].d(),_&&_.d(),f&&k(d),h&&h.d(f),f&&k(g),E=!1,V()}}}function fe(r){r.expanded=!0,r.children&&r.children.forEach(fe)}function Be(r,e,l){let{node:t}=e;const n=()=>{l(0,t.expanded=!t.expanded,t),t.isSignal&&t.expanded&&fe(t),l(0,t)};return r.$$set=o=>{"node"in o&&l(0,t=o.node)},[t,n]}class ce extends ne{constructor(e){super(),ae(this,e,Be,ze,ie,{node:0})}}function te(r,e,l){const t=r.slice();return t[7]=e[l],t}function le(r){let e,l;return e=new ce({props:{node:r[7]}}),{c(){O(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){Y(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.node=t[7]),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function He(r){let e,l,t=r[0].children||[],n=[];for(let a=0;a<t.length;a+=1)n[a]=le(te(r,t,a));const o=a=>w(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=N()},l(a){for(let s=0;s<n.length;s+=1)n[s].l(a);e=N()},m(a,s){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(a,s);$(a,e,s),l=!0},p(a,[s]){if(s&1){t=a[0].children||[];let i;for(i=0;i<t.length;i+=1){const c=te(a,t,i);n[i]?(n[i].p(c,s),v(n[i],1)):(n[i]=le(c),n[i].c(),v(n[i],1),n[i].m(e.parentNode,e))}for(H(),i=t.length;i<n.length;i+=1)o(i);K()}},i(a){if(!l){for(let s=0;s<t.length;s+=1)v(n[s]);l=!0}},o(a){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)w(n[s]);l=!1},d(a){pe(n,a),a&&k(e)}}}function Ke(r,e,l){let t,n,{row:o}=e,{selectRowsSchema:a=void 0}=e,{highlightedFields:s}=e;const i=ke();be(r,i,d=>l(5,n=d));function c(d){var f;const g=I.field(d),m=I.path(d);let E=I.value(d),V=I.span(d);if(g.dtype==="string_span"&&(V=V||E,V!=null)){const u=[];for(let p=m.length-1;p>=0;p--){const y=m.slice(0,p);if(we(a.schema,y).dtype==="string"){const G=I.value(Se(o,y));u.push(G.slice(V.start,V.end));break}}E=u}const A=((f=n.data)==null?void 0:f.some(u=>{var p;return u.name===((p=g.signal)==null?void 0:p.signal_name)}))||!1,S=Ee(g),C=ye(g);let _;A||S&&g.dtype==null||g.dtype==="embedding"||g.repeated_field!=null?_="":E==null?_=null:_=Ve(E);function h(u){const{[Pe]:p,[Fe]:y,[Ne]:z,[Ae]:G,[Le]:Oe,...de}=u;return Object.values(de).filter(ue=>{var W;return((W=I.field(ue))==null?void 0:W.label)==null})}const M=s.some(u=>$e(u.path,m));return{children:Array.isArray(d)?d.map(c):h(d).map(c),fieldName:m[m.length-1],field:g,path:m,expanded:M,isSignal:S,isLabel:C,isPreviewSignal:a!=null?Ie(a,m):!1,isEmbeddingSignal:A,value:E,formattedValue:_}}return r.$$set=d=>{"row"in d&&l(2,o=d.row),"selectRowsSchema"in d&&l(3,a=d.selectRowsSchema),"highlightedFields"in d&&l(4,s=d.highlightedFields)},r.$$.update=()=>{r.$$.dirty&4&&l(0,t=c(o))},[t,i,o,a,s]}class Ue extends ne{constructor(e){super(),ae(this,e,Ke,He,ie,{row:2,selectRowsSchema:3,highlightedFields:4})}}export{Ue as I};
